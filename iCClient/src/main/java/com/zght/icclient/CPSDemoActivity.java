package com.zght.icclient;

import com.zght.icclient.CommonUse;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.widget.EditText;
import android.view.View;
import android.widget.ImageView;
import android.widget.TextView;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Matrix;

public class CPSDemoActivity extends Activity {

	//
	//变量
	private ImageView img_CPS;
	//
	private EditText edt_Name;
	private EditText edt_Addr;
	private EditText edt_CertOrgan;
	private EditText edt_QualifiSort;
	private EditText edt_QualifiNO;
	private EditText edt_ValidDateTo;
	//
	private TextView lbl_TechTitle;
	//
	////////////////////////   函数  //////////////////////////////
	/**
     * 将字节数组转换成imageview可以调用的bitmap对象
     * @param bytes
     * @param opts
     * @return Bitmap
     */
    public static Bitmap getPicFromBytes(byte[] bytes,
                    BitmapFactory.Options opts) {
       if (bytes != null)
       {
    	   if (opts != null)
    	   {
    		   return BitmapFactory.decodeByteArray(bytes, 0, bytes.length,opts);
    	   }
           else
           {
        	   return BitmapFactory.decodeByteArray(bytes, 0, bytes.length);
           }
       }
       else
       {
    	   return null;
       }
    }
	
	private void ShowImage( String strImage )
	{
		byte[] imgData = null;
		BitmapFactory.Options opt = new BitmapFactory.Options();  
		//opt.inPreferredConfig = Bitmap.Config.RGB_565;  
		//opt.inPurgeable = true;  
		//opt.inInputShareable = true;  
		//
		do{
			//字节流
			imgData = CommonUse.hexStringToBytes( strImage );
			//控件显示
			img_CPS.setImageBitmap( getPicFromBytes( imgData, opt ) );
			//界面显示
			if(img_CPS.getVisibility()==View.INVISIBLE){
				img_CPS.setVisibility(View.VISIBLE);
			}
		}while(false);
		
	}
	//
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_cpsdemo);
		//
		//取控件
		edt_Name = (EditText)findViewById(R.id.editText_Name);
		edt_Addr = (EditText)findViewById(R.id.editText_Addr);
		edt_CertOrgan = (EditText)findViewById(R.id.editText_CertOrgan);
		edt_QualifiSort = (EditText)findViewById(R.id.editText_QualifiSort);
		edt_QualifiNO = (EditText)findViewById(R.id.editText_QualifiNO);
		edt_ValidDateTo = (EditText)findViewById(R.id.editText_ValidDateTo);
		//
		lbl_TechTitle = (TextView)findViewById(R.id.textView_TechTitle);
		//
		img_CPS = (ImageView)findViewById(R.id.imageView_show);
		//界面隐藏
		if(img_CPS.getVisibility()==View.VISIBLE){
			img_CPS.setVisibility(View.INVISIBLE);
		}
		//界面显示
		edt_Name.setText( CommonUse.strName );
		edt_Addr.setText( CommonUse.strAddr );
		edt_CertOrgan.setText( CommonUse.strCertOrgan );
		edt_QualifiSort.setText( CommonUse.strCertSort );
		edt_QualifiNO.setText( CommonUse.strCertID );
		edt_ValidDateTo.setText( CommonUse.strEndDate );
		//
		lbl_TechTitle.setFocusable(true);
		lbl_TechTitle.setFocusableInTouchMode(true);
		lbl_TechTitle.requestFocus();
		lbl_TechTitle.requestFocusFromTouch();
		//照片
		if( CommonUse.blImageOK )
		{
			//for debug
			CommonUse.strImage2 = "FFD8FFE000104A46494600010101006000600000FFDB0043000D090A0B0A080D0B0B0B0F0E0D1014211514121214281D1E1821302A32312F2A2E2D343B4B40343847392D2E425942474E50545554333F5D635C52624B535451FFDB0043010E0F0F1411142715152751362E365151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151515151FFC000110800C800A203012200021101031101FFC4001F0000010501010101010100000000000000000102030405060708090A0BFFC400B5100002010303020403050504040000017D01020300041105122131410613516107227114328191A1082342B1C11552D1F02433627282090A161718191A25262728292A3435363738393A434445464748494A535455565758595A636465666768696A737475767778797A838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE1E2E3E4E5E6E7E8E9EAF1F2F3F4F5F6F7F8F9FAFFC4001F0100030101010101010101010000000000000102030405060708090A0BFFC400B51100020102040403040705040400010277000102031104052131061241510761711322328108144291A1B1C109233352F0156272D10A162434E125F11718191A262728292A35363738393A434445464748494A535455565758595A636465666768696A737475767778797A82838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE2E3E4E5E6E7E8E9EAF2F3F4F5F6F7F8F9FAFFDA000" +
					"C03010002110311003F00F4EA28A2800A28A2800A28A2800A2B2B57F11E93A30C5EDDAAC98C8897E673F80FEB5CB5DFC4FB44622D34D9A51EB2384FD066803BEA2BCAAEBE24EAF3022DEDEDA053D0E0BB0FCCE3F4AA89F1075F490335C42E07F0B4231FA60D007B0515E6763F132F049FE9B6104B1FAC04A91F9939FD2BAED2FC61A26A7B552EC4129FF9673FC87F3E87F03401BD451D68A0028A28A0028A28A0028A28A0028A28A0028A28A0028A2827009C66801B2489146D248EA88A32598E0015E6DE2AF8812B48F67A2B048C70D738F99BFDDF4FAFF2AA3E36F174BA94B2585B394B456C30E85C8F53F5AE24B12738A0092599E595A495CC8EC72598E493F8D464D2AA973F2AD4EB672311F29E7DA95C693657524753475E2AF2E9739190871F4A43A5DC609119C7D297322B919473EA7F1A916461919C8AB2BA5DC13F70FE54D7D3E643F74E69DD072336344F176ADA385582E3CC8075826F997F0EE3F0AF46F0F78DB4CD676C32B0B4BB271E5487863FECB77FA75AF18923789CA914D2DC5326C7D214579EFC38F14CB758D22FA4795C026191B9381FC24FF2FF00F557A15020A28A2800A28A2800A28A2800A28A2800AE7BC6BADCBA2688D2DBE3CE90EC527F87DFEB5D0D79BFC5CBB012C2D36C993BA4DDD17D31EE7F971EB401E712486472EC724F34E86269A40AA3AD42BC9AE8BC3B61E64A1D8679A993B22E11E67634F49D05044AF20C93C9AE82DF4D81570635356ADE00ABE83A62AFA46028C0AE7BB67728A8A33BEC48B801140F614EFB0A118D8067D2AF918E38A631E690CA26C1146368FCAAA5CE9CB8CE067E95B59C8A63C61BB5017387D4B4912467681BB1D40AE52E2DDA172AC0F15EA5736D953815C9EB7A712A5C0048AD212B6E65529A6AE8C1D1F52934ABE4BB8F05E360C01EE47F9C57B9E81ACDB6BBA5C7796E4027878F3CA37A1AF019A328C41AEA7E1DEA2D65E228503BEDB8FDD3203C1CF7FCFF00AD6E"+
		"711ECF451450014514500145145001451450015C27C55B6B36D22DEEA60E2E51CA4657A107920FE42BBBAF39F8B578BE5D8582825C96958E4E00E83FAFE5EF401E6912FCC335DF7856DC084311C7635C559426499571D4E2BD2B49B716F6E8B93D2B2A8F43A282D6E698EDC54A1F0D81CFAD5396F638B00919E9C54D0DDC18F9982FD6B1499D2DA27607AD336E4F352ADC5BCA06D6069E11339CF14EC172061C71511DC0F4CD4F3CF145F79B02B32E755B64FBADBA8E517322DB80CBC8C562EA50AB2B0C75CF6A93FB59F78FDD1294C9AE12E1095CE33CF18C536AC09DCE035388C7332EDEFDAA6F0BDC4765E22B2B996369163941DA1777E9FE79C55CD7E2C4A4F53D4D65E9739B4D4E09C2093CB70DB72467E9820E6B78BBA38A6ACCFA194EE504679F5A5A8AD674B9B486E233949503AFD08CD4B54405145140051451400514514005731E3ED27FB4BC3EF2C685A6B73BC6D1C95EE3E9DFF0AE9E8A00F01B01B6E901E30D5E8D0465AD540623DC5735E2CD2FFB3FC4331B68C244C43285180322BAEB14C5BA020F4F4AE79BBD8ECA4AD72945A69770BBB8CE735664D21038673BBEA053AEA4BC5F96CA05DDD3CC93A0FC3BD636A565ADCD34645C3CA9905F73951EE30B818FD78A1152563616D628B01074AB9922218CD66DB5B4B1BED0EDB368EA7BD69237EE5B352CB48A8E8B70F82A081EB486CEC5783E5923AF19A890B48CE9BB6F071CE326A9EA7A7CF73651C56A55255397662483CF6C74FF000A6852562E4F696ECB98C21C7A76AA8600AA405C7AD548B4BBEB6D852E1B39F9813907E99E95A67263C32E1B1CD0C491C8789401B4F7E9543C31A44BAC6B705BC69BA30C1E4E718407935A5E2285DE48C2E4F5FE95D9FC37B05B4B1BB90A01"+
					"23BA8247A01D3F5AD60F448E7AB1776CEC91163454518551803D052D14568601451450014514500145145001451450073BE28D323B85171B416C6D23E87AD436AA0201EC3BD6B6B9134968BB4E0EEC564DB92B80DD7BD73CD7BC76D277822D08CE33C015148BBB8DD8FA55C88864C541226189E948B456F256219EED4BB49538E94D33ABB95519DBC66A60088F9E86915B192BF24DCFAD5C58636E7BFD6AADE298E4CD4D653A5C13193B5D7B5086CB1E4281C0AAF711900D5F5523AD52BD900045049873DAF9D7719C6769CD76BE1BB4369A4A6EFBF293237E3D3F4C5724ACDE782BDABBF85764289FDD502B4A6B530AEECAC3E8A28AD8E50A28A2800A28A2800A28A2800A28A28020BD84CF6AF1AF5238AE6B959587A1AEB2B9BD4971A9CC3D707F4158D55D4E9A12FB23E29B0A2AADFDD3ECD910CB3703EB4DDC41C2D25AAEE95E593B1C28FE66B34CE9DB51A0C7A7DB6650EEDFECAE4934E1A9AB40A591E31FDD71822AE12AEBCE31504CA9B7914C5BEE655EEA58901F224957A6540C0FCCD3595B725CC40AB2F6F51DEAFCD0AF04015189154E0D032D89CB420E79ACEBB94938A9C37CACABFC27F4AA731C9A403F4D864BAD4522452DCE5B1D86475AEF6B98F07C64CB772E38C2AE7F3FFEB574F5B535A5CE3AD2BCAC1451456862145145001451450014514500145145001583AF4452EA29C7DD71B09F71FE7F4ADEA82F2D92EED5E17E370E0FA1EC6A64AEAC5C25CB2B9CD0049C8A648CD0C6DB5773024E3D73CD3433C4ED1C830E876B0F71561464990F390062B98EF32E6D69A07086D25DE474238FD2ACACF792C6AE618707F877104738A9A78D58648C8A8185BA273C0AA41E853BDBDBCB70DC42C5573B14E4FD3EB54EDEEEF6E8EE36BE581D771ABF2794C7F76B5245188FE66181E94C09514881DBA138AA7291B58B74AB52C8562FAF26B3D6EECE2B984DFC9B2DB78DE719E2A6D715ECAE765E1BB636DA4465861E62653F8F4FD315AB4C8A48E5892489D5E3600AB29C823DA9F5D295958F3DBBBB8514514C4145145001451450014514500145145001591E27D6068BA3C97230666F92207FBC7BFE1D6B5C900124E00EF5E57E3BD7A2D5AED2DED5B75BDB8386ECEC7A9FA7FF005E93762A2AECBDA7DCCB73A7C3772397924196627249CD6ADB5C090050706B27C32A1FC3F6C0F3"+
		"C1FF00D08D5B911E07DC9DAB97A9DEB635553771D0D4735AAB72C99FC2AA43A82672C76B0ED4F9352420E1C5508996D428E131514C83F2AAEDA98C7DFAA371AA2952917CCDEB400FD42EB60D80E4D739E212C34A663D77A9AD78A0795BCC90F27B554D6E256D3255238C67FAD0B46296A990F82BC593E91751DACCE5EC6460194FFCB3CFF10FEA2BD8ABE71B718C9AF49F0E7C41D91C76BABA92000A2E1073FF00021FD47E55BDCE36AE7A2D14C8658E7892589D5E37019594E4114FAA2028A28A0028A28A0028A2A8EA3AB59E9A84CF2FCF8C845E58D005EACAD4FC43A7E9B95925F3251FC09CFE7E95CA6ADE29BABC26384F910FA29E4FD4D731712124927269D8A48D5F1278C6F35147B4800B7B76E1829CB38F427D2B920DB9B069D31CB1A8738606B136B5B4476DE0FB857D34DB13F3C2C463D89C8FEBF956FB2871D39AF3ED2AF9AC6F12E17250FCB228EE2BD06DA64B8856589B72B0C83EB5949599BC1DD15DAD626E1D063E94D6D16DE45DCA3F238ABCD827D0D344E6DC1C8E0D24C6CC8B8D1ADE21CEE27EB50A5A430F2179F7ABF34AF7529206107AD22C20B73C814EE16200842D61789661158B203CBFCA0574370EA8849C00075AE2358BC17975BC7FAB4E13DFDE9C55D9337646511E5C7B7B9A721C2D318EE6CD3D4715B1CC749A0F88B51D36111C172C117F81BE65FC8F4FC2BB6D2FC716F3612FE2F29BFE7A47CAFE5D47EB5E636BC0ABAA08AD22AE8996E7B3DA5F5ADEA6FB5B88E51DF6B671F51DAAC578CC13CD03878A46471D194E08A"+
					"E8B4DF186A16B84B8DB7318FEFF000DF9FF008E68B1363D128AE6D7C69A69505A2B8071C8DABC7EB45160B19DAB78B6593745623CA4E9BCFDE3FE15CB4D70F33977666279249CE6A266CB1E69A4F35690C7649A8261C1A9477A64A3319C53681333255CB1155D855B907CC0FAD42CB9AE546CF719139538ADED0F5A6D3E408F96B763C8FEE9F5158041A72B10686AE09D8F548A58AEA0596270CA4641151CCD85C30AE1B45D6A5D3A5C67740C7E65F4F7AEC56F21B989648DB2ADE86B26AC6F19730A1801800FE54E3F22166C281EB42955CB315551C924F41589E22D661107916F2AC8CDD4A1C80292D4A6EC65EB9AA79CCD0C47F763A9F5AE72572E71524AE5CD30256E958E594B998C54E6A5C5394539572C298AC58B65F9947B66AE81E955ADC66427D2AD0ADA1B19CB70C53BA50052D5084DD451CD145807B70683487A9E69334C078E6823E5EF480D2FB50067CC9D47A541D6AFCC993F5AA530319C9538FA573CA3666B1774336E69360353C704D226ED81171FC54CBEB4912DB7AC8720FCC071C51CAC5CC8AEEE91FDE603DBBD2457B344CCD0B3C640C820E3350AC6A39EA7DE86F94838A92B55A9A571ADDD5CC090B9C6F2BBB1E82B33CC91C921BF0ED51AAED98804FC81BF954910C2D3B25B05DCB71C1C8FBC9F9548AE8DC03CFA1A662AE6970EE95A52385181F5A12BBB09E844053E31D5BF2AD236F1BA64A2E4139C75355FC85DC42F4156E9B254D0FB740B1E7D6A553CD0061702940AD4CC70A5A38A3B7B5300C514CDE3D4D140123727F1A8CF068A2818F19A534514006073DE9190118228A2801533CAFE34A54329040DA4608A28A04604919826788FF09E3DC535C645145733D19D0B5891118B993DC1FE54F8FEED1450C51DD8B5B96D0882D911B83D5BEB451574C9A8492955191F85448B8EBD68A2B632438FA50A33451401274A6BFDDA28A00AFBC7B51451480FFFD9";
			
			Log.v("IMAGE", String.format( "Length(CommonUse.strImage)=%d", CommonUse.strImage.length() ) );
			Log.v("IMAGE", String.format( "Length(CommonUse.strImage2)=%d", CommonUse.strImage2.length() ) );
			if( CommonUse.strImage.equalsIgnoreCase( CommonUse.strImage ) )
			{
				Log.v("IMAGE", "CommonUse.strImage=CommonUse.strImage2" );
			}
			else
			{
				Log.v("IMAGE", "CommonUse.strImage!=CommonUse.strImage2" );
			}
			//debug end
			ShowImage( CommonUse.strImage );
		}
		
	}

	@Override
	public boolean onCreateOptionsMenu(Menu menu) {
		// Inflate the menu; this adds items to the action bar if it is present.
		getMenuInflater().inflate(R.menu.activity_cpsdemo, menu);
		return true;
	}

}
